pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- Blobby Volley clone
-- by HighPerformanceCookie
physics = { yMax = 500, gravity = 0.3, poleHeight = 50}
rules = { kickoff = true, lastTouch = 0, countTouch = 0 }
objects = {}

function _init()
 objects.w = World:create()
 objects.b = Ball:create({30, 31})
 objects.p1 = Blob:create({23, 0}, 0)
 objects.p2 = Blob:create({87, 0}, 1)
end

function _update()
 -- interact with players
 if objects.b:collide(objects.p1:getBounding()) then
   rules.kickoff = false
   objects.b:bounce(objects.p1:getCog(), objects.p1.v)
 end
 if objects.b:collide(objects.p2:getBounding()) then
   rules.kickoff = false
   objects.b:bounce(objects.p2:getCog(), objects.p2.v)
 end

 -- interact with world
 x1, y1, x2, y2 = objects.b:getBounding()
 if (x1 < 0) or (x2 > 127) then
  objects.b:reflectVertical()
 elseif objects.b:collide(objects.w:getPoleBounding()) then 
  if (y1 >= 50) then
   objects.b:reflectHorizontal()
  else
   objects.b:reflectVertical()
  end
 end

 -- check if a player scored
 if (y1 <= 0) then
  objects.b = Ball:create({30, 31})
  objects.p1 = Blob:create({23, 0}, 0)
  objects.p2 = Blob:create({87, 0}, 1)
  rules.kickoff = true
 end

 for k,v in pairs(objects) do objects[k]:update() end
end

function _draw()
 cls(1)
	draw_bg()
 for k,v in pairs(objects) do objects[k]:draw() end
end

-->8
-- world
World = {}
World.__index = World

function World:create(pos)
 local world = {}
 world.poleBb = { 63, 0, 65, physics.poleHeight }
 setmetatable(world, World)
 return world
end

function World:getPoleBounding()
 return unpack(self.poleBb)
end

function World:update()
end

function World:draw()
end

-->8
-- player blob
Blob = {}
Blob.__index = Blob

function Blob:create(pos, p)
 local blob = {}
 setmetatable(blob, Blob)
 blob.pos = pos -- origin: lower left of bounding box
 blob.w, blob.h = 16, 16
 blob.v = {0, 0}
 blob.sprStand = 2
 blob.p = p or 0
 blob.bb = {3, 0, 12, 11}
		return blob
end

function Blob:update()
 if (self.p >= 0) then
  -- human player
  if (btn(0, self.p)) then self.v[1] = max(-3, self.v[1]-1)
  elseif (btn(1, self.p)) then self.v[1] = min(3, self.v[1]+1) 
  else 
   if self.v[1] > 0 then self.v[1] -= 1
   elseif self.v[1] < 0 then self.v[1] += 1 end
  end
  if (btn(4, self.p)) then self:jump() end
 else
  -- AI player
 end

 if (self.pos[2] > 0) then
  self.v[2] -= physics.gravity
 else
  self.v[2] = 0
 end

 self.pos = { max(-3, self.pos[1] + self.v[1]), max(0, self.pos[2] + self.v[2])}
end

function Blob:draw()
 spr(
  self.sprStand, 
  self.pos[1], 
  127 - (self.h-1 + self.pos[2]), 
  -flr(-self.w/8), 
  -flr(-self.h/8)) 
end

function Blob:jump()
 if self.pos[2] <= 0 then
  self.pos[2] = 1
  self.v[2] = 6
 end
end

function Blob:getBounding()
 return offsetBounding(self.bb, self.pos)
end

function Blob:getCog()
 return { self.pos[1] + 0.5 * (self.w-1), self.pos[2] + 0.25 * (self.h-1) }
end

-->8
-- ball
Ball = {}
Ball.__index = Ball

function Ball:create(pos)
 local ball = {}
 setmetatable(ball, Ball)
 ball.pos = pos -- origin: lower left of bounding box
 ball.w, ball.h = 8, 8
 ball.v = {0, 0}
 ball.spr = 1
 ball.bb = {0, 0, 8, 8}
 ball.bouncing = false
 return ball
end

function Ball:update()
 if not(rules.kickoff) then
  if not(self.bouncing) then
   self.v[2] -= physics.gravity
  else
   self.bouncing = false
  end
 end

 self.pos =  { self.pos[1] + self.v[1], self.pos[2] + self.v[2] }
end

function Ball:draw()
 spr(
  self.spr, 
  self.pos[1], 
  127 - (self.h-1 + self.pos[2]), 
  -flr(-self.w/8), 
  -flr(-self.h/8)) 
end

function Ball:getBounding()
 return offsetBounding(self.bb, self.pos)
end

function Ball:collide(x1, y1, x2, y2)
 local w = x2 - x1
 local h = y2 - y1
 local lx, ly, rx, uy = offsetBounding(self.bb, self.pos)
 if (
   (x1 <= rx) and
   (x1 + w >= lx) and
   (y1 <= uy) and
   (y1 + h >= ly) ) then
  self.colliding = true
 else
  self.colliding = false
 end
 return self.colliding
end

function Ball:bounce(p, v)
 if not(self.bouncing) then
  local vel = (0.5 * vlen(v) + 0.8 * vlen(self.v))
  vec = { 
   self.pos[1] + 0.5 * (self.w - 1) - p[1], 
   self.pos[2] + 0.5 * (self.h - 1) - p[2] }
  self.v = { vel * vec[1] / vlen(vec), vel * vec[2] / vlen(vec) }
  self.bouncing = true
 end
end

function Ball:reflectVertical()
 self.v = { -self.v[1], self.v[2] }
end

function Ball:reflectHorizontal()
 self.v = { self.v[1], -self.v[2] }
end
-->8
-- utils

function vlen(vec)
 local s = 0.0
 foreach(vec, function(x) s += x^2 end)
 return sqrt(s)
end

function offsetBounding(bb, pos)
 return bb[1] + pos[1], bb[2] + pos[2], bb[3] + pos[1], bb[4] + pos[2]
end

-->8
-- background image
local img="c66666666cd51dd66d666666ccc1cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccdddddddddddddddddddddddddd6c6d666666661105dc66d6d66c66cc1ccccccccccccccccccccccccccccc6ccccccccccccccccccccccccccccccccccccccccccdddcccccccdddddddddddcdddc66dc666666cd11c66cdddd666cccc1cc6ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccdddcccccccccdddddddddcdd6c60566666cd1c1cc6666666dddccccdccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccddcddddddccccd6c6dc666cdd15ddddc666666ccc6cc60dccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccd6d610dccd5115d6ddcc666666666cc6d16cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc6dd5d1ddd1055c6ddcc6666666666c6d16ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccdc66ddd51ddd503356dddcc66666666c6ccc1d66ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccddd6631c0d53350ddddc666666666cc66c11cc6cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc6dddd66630cd535310ccd1c666666666c66cc11cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccd6cd6d335d533333353ccd6c666666cccc111ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc6dd6303d03501533cc11ccdd66666c1c1c1ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc66cc6cc6ccc6666ddd5333033035dd3c66666c1c666c3d111cccccccccccccccccccccccccccccccccccdcccccccccccccccccccccccccccccccccccccccccccc6ccccccccccc6c6663331053015dcd1c66666c1c66cc1c11ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc6c6666030003303d13133dc6666c1c6ccc1c1cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc666030003301d0dd513dc66ccc1cccc111cccccccccccccccccccccccccccccccccccccccccc6cccccccccccccccccccccccccccccccccccccccccccccccccc6c660330333013111cd10c66c1cd1cc11110cccc11113cccccccccccccccccccccc6ccc66c6666ccccccccccccccccccccccccccccccc1ccccccccccccccccccccc603303033031dd1dcc3c6cc111ccc015ccccc1111ccccccccccccccccccccccc6c6666666666ccccccccccccccccccccc111cccccc1ccccccccccccccccccccc65033030301c11ccc103cc1c10cc10d0ccc111011cccccccccccccc66ccc6c66666666666666ccccccccccccccccccccccc11ccccc11cccccccccccccccccccc60303330301dccddcc101ccd110c3051c11110111ccccccccccccccccc6666666666c666666cccccccccccccccccccccccccc1cccc111cccccccc1c13cccccccc530303300c1116c66c13c1dc111c0310c11510cccccccccccccccccc6c6666c66666666666ccccccccccccccccccccccccccc31ccc01cccccc111ccccccc6ccc03033030111c1c66cc110c1101101510113111ccccccccccccccccccc6666666666666666cccccccccccccccccccccccccccc1133d11ccccc11ccccccccccccc11303300dcddcc00333b300115111310151011cccccccccccccccccc6c666666666666ccccccccccccccccccccccccccccccccc0c301cccc311cccccccd1cccc03030301111333333333333333c1351131111ccccccccccccccccccc6c666666666666ccccccccccccccccccccccccccccc1cc103301ccc311cccccccc1ccccc330330301303301111d15030133330130c0c1cccccccccccccccccc666666666666666c6c6cccccccccccccccccccccccc3ccc0033310c513111cccc11cccccc0300333311110100c11c11010303303511d03cc6ccccccccccccccc66666666666666666cccccccccccccc11cccccccc3cccccc03351c0351c6ccccc1ccccccc5303030011c1ccd1c1c1111113033303333303131cccccccccccc6c66666666666666666c66cccccccccccc111ccccc3ccccccc03031053111ccccc111cccccc030333303011cccccc01c0030330330330311c1dc1ccccccccccc66666666666666666666666666ccccccccc11cccc33ccccccc10351351c011cccc01cccc1cc533330330301111cccc01101303330300110ccc1cc11cccccccc6666666666666666666666666cccccccccc1111ccb1ccccccccc13033001110cc3c1111ccccc33b333033001101100001333330333311dccccccc66c1cccccc6666666666666666666666666ccc111cc11c1101cc30dccccccd1130331c03d11b30113cccccc03b33330303311131013333030330311cdcccc66c666c1c6666666666666666666666666666666c6ccccd330031c03503333cdc3033311cc031333101ccccccc53b33333000331110033333333030011ccccc6cc6cc66c1c666666666666666666666666666666666cc6cc33330d031d00000dd0005311cc153333351ccccccc3b3333500033330100000333303301cccccccccccc6666ccc666c666666666666666666666666666666c66c133013303333b33d03333136bc10333331ccccccc3b3330300100333011111133330331100ccccccccccccccccccccccc6cc6666666666666666666c6c66666cd033033d0d30333305030330103333031cccccccd3b3333001c000133011c11033300015115ccccccccccccccccccccccccccc6666666666666666666666666cd030000ddddd050333330013133bb3b31ccccccc63a33553100000113511c50033335111c1113cccccccccccccccccccccccc6666d66666666666666666666666d33330dd6d6053533330003503533031ccccc3b33b33300111100111351d0103330101011c133ccccccccccccccccccccccc66666666666666666666666666660530300d663b33330303030cc0030305d300b3133b35131c1111101c1300110303110111011113cccdccccccccccccccccccc66666666666c666666666666666c0003333bbb6d033333303b3cc103011d333111cb333301c1c11011c0131c1133051c11111cc131cccccccccccccccccccccd6c666666cdd6666666666666666d10333b005ddb303b0300310531000033b510cdcb33301155ddcc111c01310033111cc11101c111dcccccccccccccccccccccccccc6666cddd666666666c3303d0003031dc03333b3333113333003000311013cc3333550155550111511131333110cc11c11c1cc1cccccddddcccccdccccdcdcd6dc66666666dddd66dbb003333333050c033133b30333101015303311001111cb3301105511555100cc133030c11ccccc11ccc1d3ddcccccdcddddcccccdddccccc6dd6d6d66dddc33b033533500300c33cd003b311030ccc003303d1cccc1cc33515101515511510111033301c0cccc1c11c6ccdddc6cc6ccccddddddddddcdc666dd666666d6d536cdccc0c0033003010113330111311cc10333035ccccccc3331511155515111515503351c111ccccc11c66665d6ddd6666cddddddddddcdc6dd6666666666ddddd6666c603303033c0015330c11511c3033353150cccccc3331010011515110501503335d1116c66cdd16666cdddddddd6d66ccddddccc6cdddddd6dd666dd666666dc6d3333303331010311c11111013330501001ccccc330111111151511010050333551505666cdc1c6666d66ddd6d666666c666dd6d6dd6ddddddd66666666dddcc30333111533015311cc11300050331c1105ccccc3011111015110511000100305510055d666c5d6d66cc666dddc6666666666cddddddddc6cdddd666666ddcc3313b3101133303311cc11131130301dcd033cccc331111001510151110003330051005116666d56dd66d6666dddd6666666666cd6dddddccccd6cdddddd6c633103300cc10033353ccc11311003011cccc35dccc001111101550551111033501111105116666d1c6666c6d666d66666666666ccccddccd6ddd6c6dcc6dcccc3310303ccc1100331ccccc001c0310111ccc1031cc01111110150155111100301110110511666665c66d666666666666666666666ddd6cd6d6dddddddccccc6b131133d1cc1111033ccccc1111311011ccccc113cc0111111011055111103305111111051166666dc6666666666666666666666666666dddddddddddcddcccc31c110331cc1cc1103cccc31111111111cccccc131c1011111010155111110305111111051166666cc66666666666666666666666666dddddddddddddccccc633cc1103d0cc1cc110c3ccc1c111111111ccccccc31c11111110111151111010151111150511666666d66666666d66666666666666666ddddddddddddddccccc3ccc10c300c1cccc10cc3c3ccc13c111d1cccccccc3111111111111151111111511111150111c6666616666666666666666666666dddddd666dddddc6cccccc33ccc10c300ccccccc1cc3cdccd11c111c1ccccccccd111111111111111110111551111150111cc666cc66666666666666666666666dddddddddddcccccccccc31ccc1cc031cccccc5dccd3cccc13cc3dc1ccccccccc111111111111111111111151151151111cccc66666666666666ddd666666dddddddddddcccccccccccccccccc1cc111cccccc5cccc3ccccdccc3dc1cccccccccc11111000011111111111151115151111cccccccddccccccccccddddccccccccdcdddddcccccccccccc3ccccc1ccc111ccccc5ccdccdddcdccc3cc1dcccccdccc11115010111111111111155515111111cccccdd55ccccdcdccccdcddccccccdccddddcdccccccccccc3ccccccccc1c1ccccc1ccccddccddcccdcc1cccccccccc11111110011111111111155151151111cccccdd55ccccccccccccccccccccccdcdcccccccccccccccccccccccccc1c1ccccc1cccccccccccccccc1cccccccccc11111111011111111111115d51151111cccccddd5cccccccccccccccccccccc77dccccccccccccccc1cccccccccccc0ccccc1cccccccccccccccc0cccccccccc1110011101111111111115dd51511151ccccdddd5cccccccccccccccccccccc65cdcccccccccccccc3cccccccccccc0ccccd1cccccccccccccccc1cccccccccc1111111111111111111115dd51511151c66ccddd5cccccccc666ccccccccccc65ccccc666ccccccccdcc6ccccccccc0c66c11ccccccc6ccc6cccd1c666cccccc1100111111111111111115dd55111151dcccddddddcccccccccccccccc6cccc65ccccccccccccccccccccccccccccc0cccc1dccccc6cccccc66cd1ccccccccc615011111011111111dccdcddddddcdccccdccccccccc6cccccccccc6ccc66cc65cccdccccccccccccccccccccccccc1cccc1ccccccccccccccccd1cccccccccc11111dcc11cdcccccdccdcdcdddd6ccd6dddcdcddcc6ccc66cdc6c6cccccccc65cc66ccccc66cccccc6ccc6ccc66cc11ccc1cccc6cccc66cccccd1ccccc6ccccd01ddccd10ccccdcdddddccd6ccddcddddddcdccdcccccccccccccccccccccc65cccccccccccccccccc6ccccccccccd1ccc0c666cccccccccccc11c6cccc666cd0cddc6c00cc66cd6dcdccc6cccccddcccc66ccccccccccccccdccccccdcccc65dccccc6ccccccc6cccccccc66ccccc0c6c1cccccc66cccc66cc11cccccccccc00dddccc00ccdcccccccccddcddddccccccccccccccccc6cccccccccc6666cc65c666cccccccccccccccccccccccccc0ccc0cccccccccccccccc11cccccccccc01c66ddd10dddcdcccddccccccdccccccccccccccc6ccccccccccc6cccccccc65ccccc6666666666666666999999999199a199a99999999aa999159a6cccccc60cdccccc10ddddcc6ddcccccccdddcccdcccc6ccccc66cccccccc6ccccccc6661aa999999699999a9999999999999960a6919999969999999999199999aa966c0ccccdcd016ccdccc66cccddccdd6c66cccccccccccccccccccccccc6996699616999999a999966999aa99999999996099909a66ad66a9a999590aaa99999999dcc1cccd10ccccccccccdccddddddcccccccc6cccccccccc66cdd49996a699961a9999a6a6999aaa666999aaa999999119509959555555555511055111151115cccc669a10aa96aa6666666666666666666666666666666699999999996a9996199aaa99a9699999999999999693551115511555555555511551115555551155a699999611a9aa999999999699a699999999996696faa969999aa69999a99966199666a69aa99999999999996955555555111115555559aaa699665556a6669699999666509699696999999999996aa6669999aaaaa69999999999999999999619aaa96a6aaaaa6a66a69999999999aa59a696691559aaaa9aa966a6a999999999a6a66a515999999999999999999a999aaa6aa9a69a96a66999999aa999aa961996966a96999999999aaa999a9999999a6aaa66699999999999999a99999999999a6aaa5059999999969999999999999969999999a999999a66999669999996199999999a96aaa6aa66a99999999999a966999999999999999999999999999a99999aaa90599999a66999999535599aa969939aaaa666aa9995551996aaaaa61aa99999999999996aa6a6699999969aaaa66a99999996a6aaaaaa666aa999996aaa999931599999999995555555155555555111111155555559999993119996199999999999999999999999999999999a99999999999a99aa99999999999999999999aa600a6aaaaaaa69a95111115955155551555551996aaaa96a9699699619999999999999a6aa99999a999a99999999999969a96996966a999999999999aaaaaa6a901555511151555511111111551515555555555999966a6a9699999619a6aa9a6699969aaa6a99999a96aa9999999999999999999969a9a9999999999555559991099555555111111111155551555aa6aaa695999969999aaaaaaaa61a999996999aa66aaaa669999999969a999999999999999999a99999999999969999999991055511155115115555155555559aaaa99999999999996a9aa6faa61aa69696a6aaaaaaa6999999999999699699996996aa6aaaaaaaa999999996a6995555559999995515955555999999993595555a999999999999999999aaa66616999999999996669999999996999a999999999999699669999999999999966a6a6aa6a99955555995555599999999999999995559aa6a9a99999999996aaaa61a999999999999999999999999999999999999999a96aaaa9999999999999996a6aaa69555599699555559999999999a999999a6969aa6999999996996a96aa61aa99111999999966a66a999999999999999999a699aaaaaa6aa6a699699999999955599999996959555999afaaaaaa6f66aaa66699999996a699999aa6aaaa61faa9991999999996aa6aaaaa99999999999999969999999a9699a6aaa69999a559999999999999a95559999afaaaaaaa666a6a6a99999996aaaaaaaa66a6aa61affa99a999999999996a66a6aa96699996999999999999999999669aaa6aa6499999999999999999999999aaaaaaafaaa66aaaa96aa6aa9696a9999a9aaaaa61aa9f66999999999999999af666666666699999996999a666aaaaa6a66aaa6aa99999999999999a99999999a9a9999aaaa669996aaaa6aa699999999999996a61fa99a991999999999666996696666996699999999999999a6a96aaaa9a699969999999996699aa6999999999999999a66999966aaaaaaa969999999999999961aa999999999999999666999966699969aaa9969a999999999969aaaafa6a9a99999996969999999999999999999999a69699aa69666699999999999999666961a6999999999a99a99966a99aaa669999aaa9999999999999999996669666a99996969999999999999999999999999a9699996669a99999999999999999a6aa61aa966999199999a99699a6aaaa6699999a999999a9aa99999999999999999999699999999999999999999999999999aa69a9a999999999999999999a9a966a61aa996999199996a999a9999a6aa6a6a9aa999999999a6aa999a999999999999a999a96969999999999999999999999aa699a99999999999999999999a96a6a61aaaaa99afa96aa999999999aaaa6a6666aa999999999aaa99666666999999999a69a999999999999999999999999a9996a99aa99999999999999999999969961a996a69991aaaa966999999a9aaaa66aaaa96699999999aaa69a6999969999aa69a9969999999999999999999999999999a9969996999999999999999999996199699399a16aaaa6a699a9996fa9999a99999999999996999999999999996aaa9999999999999999999999999999999999a9aa699969999999999999999999619999999aa9aaaa6a6a699a99a9969999999999999999999999999999999996999999999999999999999999999999999999a6669aaa66a999999999999999996199999a696a966a666a6a9696a6999999999999699696969999999999999999999999999999999999999999999a9999999999aaaaa6aa96999999999999999961999996a9991aaa6aa9999a9aa6999999999996969a9a669999999999999999999999999999999999999999999999999999996a9a696aa6966999999999999961a69aaaa999199999999999999a9a9aa999999a999999999999999999999999999999999999999999999999999996999999999aa69aa9a9699999999999996a61a6aa66996999999999999999669aa9a999999999999999999999999999996aa99999999999999999996969a9a999969699999a99aaa6aa99699999999999aa61aaa6aa1a9991999999999999a96666a96999969999999969999999999a6aaa699999999999999996696aaaaaa9699999aa6996aaaa696aaaa999999999999661aaaaf99a999199999999999999966a669a6969699999999999999999a699aaa99996969666966a9aaaa6fa66a996669699a69969aaaa69999999999999999961a9aaa9a961999999999999999996a666699996969999999999999999999aa6a66a96a66aa66aa9aaaaa9aaaa6a6a9999aafa9996966a9999999999999999996199999999999919999999999996999a9966a99a99a9999999999999996969aa6966a9a6aa6aaaaa9aaaaaaaa9969999a666a9999969999999999999999999996199993999199919999999999969666999a66699996999999999999999999a666aaaaa6aa6aaaaaaaaaaaaaa6a999999a669999999999999999999999999999961999999919999199999999999996699a699996999699999999999999999a96a69a9a696a6aaa6a66aaaaa669699699996699a9a99999999999999999999999961999999919919999999999999999999969999969a99999999999999999969aa699a6aaaa96999999996699996999996666a996699699999999999999999999961999999999999919999999999999999999999999969999999999999999999696996a6999aa99999999999969999999a6aaa69996999999999999999999999996199999999999911999999999999999999999999999999999999999999999999999a69a69999999999969999996999a6a9aa66a69999999966996999999999996199999939999999a999999999999999999999966999999999999999999999999996969a69999999999999699a99a996faaaaaa696a996699996a9a9a9999a996199999999999199199999999999999999999999999999999999999999999999999969999699999999999969a9a6aaaa6aaa6aaaaaaaaa6a66aa996aaa69996961a99999991999991999999999999999999999999999669999999999999999999999999669999a999a9996a699669aaa6a6aa6aaaa6a9aaaa6aa6a6a66aa6a9961aa699399999991199999999999999999999999996a999a999999999999999999696a6a6a6a9a999a999a6aa66aa6aaafaa6aaa6aaa6aaa66a9aaa666aa6aa661aa99919999399399999999999999999999999999999a9969969999999999999969966aaa6aaaaaaa9aaaaaaa66aaaa6aaaaa6aa6a6aaa6aa666aaaaaa6a99a61a6a999999999999199999699999999999999999969999a99699699699999999a6aa6966aaaaa9969a9aaa6aa6aa6aaaaff66aaaa6aaaaaaaaaaaaaa6aaa66a61a9996a91999999919999969999999999999999996966aa66a66969996999999a66aa6aa9aaaa9a69a9666aa6faaaa6a6a6aaa6aaaaaaa6a9faa6966aa99aaa61a669a699a9699999199996699999999999999999966669a996a69a9666999996aaa666666aaaaaaa6666aaaaaa6a966aaaaaaafa96a6aa6aa666a66a6aa9aa619699966991a999991999996999999999999999999696a9a69996999999999999aaaa96aaaaaaaa6aaaaaaaaaaa6a666aa6a6aa6a66aaaaaaaa66a96a6aaaaa61a6a9969a999169991996999999999999999999969996666a999996996999999a9a69a9a6a69a6fa6a66afafaa6aaa6a96aaa66f6a666aaa6a66a6a666aa6aa61a6a6999966699961116669699999999999999999999999999996996699999999999a99aaa6aaaa6a6a6aaaaaaaa6aaaaa6aaaa6aaaafaaaaaaa666a6aa6aa661696a69999966a699111669999999999999999999a999999696996996999999999a69999a6aa9aaa6aaaaa6afaaaa6aa9aaaaafaaaaaaaaaaaa6aa66aaaaaaa61a699a91a9a99a11111a999699999999999999999999999999a9a669999999999996a99696a6a6aaaaff6aa66aaa6aaa6a66969aa66a6afaafaaa6aaa6a6aaa61a999a9961a11111faa999966999999999999999999999696699a9969a9999999999669a6aa6aaaaaa6aaaaaaaaafaaaa696a6aa6a9aa6aaa66faaaaaa6aaaa61a6aaa99111119aaaa666aa99a9a9999999999999999999a9a699696699a99999999999969aaafaa6aaaaffaaaaa6aa6aaa966a6a9aaaa96aa6aaaaaaaa66a661aa66311111f69a96a69aaa6a999a9999999999999999999999996a69969a9999999999a69aaa6a66aa66aaaa6a66aaa66a66aaaaaaa66a96a6aa666a969aaa616911111a999969a6666a6a669999999999999999999999999a6a99999999999"

function draw_bg()
	return draw_img(img)
end

function draw_img(data)
 for i=0,#data+1 do
  local chr=sub(data,i+1,i+1)
   pset(i%128,
   	flr(i/128),
   	convert_hex2num(chr))
 end
end

local str2hex_table={}
str2hex_table["0"]=0
str2hex_table["1"]=1
str2hex_table["2"]=2
str2hex_table["3"]=3
str2hex_table["4"]=4
str2hex_table["5"]=5
str2hex_table["6"]=6
str2hex_table["7"]=7
str2hex_table["8"]=8
str2hex_table["9"]=9
str2hex_table["a"]=10
str2hex_table["b"]=11
str2hex_table["c"]=12
str2hex_table["d"]=13
str2hex_table["e"]=14
str2hex_table["f"]=15

function	convert_hex2num(value)
	return str2hex_table[value]
end

__gfx__
00000000007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000007777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000777777770000077777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077777700000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007777000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000007777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000007777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000007777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000007777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000007777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb000000000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000505050505050505050505050505050505050505050505050505050505050505
__map__
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
